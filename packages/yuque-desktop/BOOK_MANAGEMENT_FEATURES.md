# 知识库列表管理功能 - 方案 A

## ✅ 已实现的功能

### 1. 知识库搜索 🔍
**位置**: 侧边栏知识库列表顶部

**功能**:
- 实时搜索知识库名称
- 支持中文搜索
- 显示搜索结果数量
- 一键清除搜索

**使用方法**:
1. 在知识库列表顶部的搜索框输入关键词
2. 列表会实时过滤显示匹配的知识库
3. 点击 ❌ 按钮清除搜索

---

### 2. 排序方式切换 📊
**位置**: 搜索框下方的下拉菜单

**支持的排序方式**:
- **按访问时间**: 最近访问的排在前面（默认）
- **按名称**: A-Z 字母顺序
- **按文档数**: 文档数量从多到少

**特点**:
- 排序设置会自动保存
- 不同区域（置顶、分组、其他）独立排序
- 置顶区域保持手动排序

---

### 3. 隐藏知识库 👁️‍🗨️
**功能**: 临时隐藏不常用的知识库，保持列表简洁

**如何隐藏**:
1. 右键点击知识库
2. 选择"隐藏"

**如何恢复**:
1. 打开设置页面
2. 进入"知识库管理"部分
3. 点击"查看隐藏的知识库"
4. 在列表中点击"显示"按钮

**特点**:
- 隐藏的知识库不会出现在列表中
- 隐藏的知识库不会被搜索到
- 设置页面会显示隐藏知识库的数量徽章

---

### 4. 批量管理 📦
**状态**: 已预留接口，待后续实现

**计划功能**:
- 长按进入多选模式
- 批量置顶
- 批量移动到分组
- 批量隐藏

---

## 🎯 使用场景

### 场景 1: 快速查找知识库
```
问题: 知识库太多，找不到想要的
解决: 使用搜索功能，输入关键词快速定位
```

### 场景 2: 按需求排序
```
问题: 想按文档数量查看哪些知识库内容最多
解决: 切换排序方式为"按文档数"
```

### 场景 3: 隐藏不常用的知识库
```
问题: 有些知识库很少用，但又不想删除
解决: 右键隐藏，需要时再从设置中恢复
```

---

## 📋 数据存储

所有设置保存在 `localStorage` 中：

```javascript
{
  "pinnedBookIds": ["book-1", "book-2"],
  "groups": [...],
  "lastAccessedTimes": {
    "book-1": 1705123456789,
    "book-2": 1705123457890
  },
  "hiddenBookIds": ["book-3"],
  "sortType": "lastAccessed"  // 或 "name" 或 "docCount"
}
```

---

## 🔧 技术实现

### Store 层
- `bookOrganizeStore.ts`: 添加了 `hiddenBookIds`、`sortType` 状态
- 新增方法: `hideBook()`, `showBook()`, `isHidden()`, `setSortType()`

### 组件层
- `BookList.tsx`: 
  - 添加搜索框和排序下拉菜单
  - 实现过滤和排序逻辑
  - 右键菜单添加"隐藏"选项
  
- `HiddenBooksPanel.tsx`: 
  - 新组件，用于管理隐藏的知识库
  - 显示隐藏知识库列表
  - 提供恢复显示功能

- `SettingsPanel.tsx`:
  - 添加"知识库管理"部分
  - 显示隐藏知识库数量
  - 提供入口进入隐藏知识库管理页面

---

## 🎨 UI 设计

### 知识库列表布局
```
┌─────────────────────────┐
│ [🔍 搜索知识库...]  [×] │
│ [按访问时间 ▼]          │
├─────────────────────────┤
│ 📌 置顶                 │
│   知识库 A              │
│   知识库 B              │
├─────────────────────────┤
│ 📁 分组 1               │
│   知识库 C              │
├─────────────────────────┤
│ 📚 其他                 │
│   知识库 D              │
│   知识库 E              │
└─────────────────────────┘
```

### 右键菜单
```
┌─────────────────┐
│ 📌 置顶         │
│ ───────────────│
│ 📁 移动到分组   │
│ ↩️  移出分组    │
│ ───────────────│
│ 👁️‍🗨️ 隐藏       │
└─────────────────┘
```

---

## 🚀 下一步计划

### P2 优先级功能
- [ ] 拖拽排序
- [ ] 知识库标签/颜色标记
- [ ] 批量操作实现
- [ ] 知识库统计信息展示

---

## 📝 测试清单

- [x] 搜索功能正常工作
- [x] 排序切换生效
- [x] 隐藏知识库不显示在列表中
- [x] 隐藏知识库不出现在搜索结果中
- [x] 可以从设置页面恢复隐藏的知识库
- [x] 设置持久化保存
- [x] 刷新页面后设置保持不变
